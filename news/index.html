<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • SAMtool</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />
<meta property="og:image" content="https://SAMtool.openMSE.com/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SAMtool</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/SAMtool.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Blue-Matter/SAMtool/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/Blue-Matter/SAMtool/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="samtool-122" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-122" class="anchor"></a>SAMtool 1.2.2</h2>
<ul>
<li>The <code>make_interim_MP</code> function is added to generate MPs that adjust the TAC between periodic assessments using the index.</li>
<li>An additional posfun to <code>SP</code> is added to avoid negative biomass situations.</li>
<li>Fix sampling of recruitment deviations for projections in <code>RCM</code> so that the mean is one in normal space. This error was apparent when autocorrelation was very large.</li>
<li>Assessment and RCModel objects now save the package version as attributes.</li>
<li>Shortcut function now reports year-specific reference points for the harvest control rule.</li>
<li>HCR returns TAC = NA when a control point or target point is negative.</li>
</ul>
</div>
    <div id="samtool-121" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-121" class="anchor"></a>SAMtool 1.2.1</h2>
<ul>
<li>
<code>HCR_segment</code> allows for creating control rules with any number of linear segments.</li>
<li>Assign index beta = 1 for OMs conditioned by RCM.</li>
<li>The ESS argument is re-instated for RCM to maintain backwards compatibility.</li>
<li>Fix assignment of length bins in OM by <code>RCM</code>.</li>
</ul>
</div>
    <div id="samtool-120" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-120" class="anchor"></a>SAMtool 1.2.0</h2>
<div id="rcm" class="section level3">
<h3 class="hasAnchor">
<a href="#rcm" class="anchor"></a>RCM</h3>
<ul>
<li>A new S4 object, <code>RCMdata</code>, is used to send data to the RCM model, i.e., <code><a href="../reference/check_RCMdata.html">RCM(OM, RCMdata)</a></code>. For now, backwards compatibility should still be maintained when feeding a data list (used prior to v1.2) to fit the model.</li>
<li>Internal R and TMB code for RCM has been revised, e.g., reducing interchangeability between the terms ‘survey’ and ‘index’ to focus on ‘index’ as much as possible when maintaining backwards compatibility.</li>
<li>The <code>profile</code> generic is now available for <code>RCM</code> models. Steepness, R0, and final depletion can be profiled.</li>
<li>Fixed plotting bug in <code>compare_RCM</code>.</li>
<li>Priors for index q in <code>RCM</code> are now lognormal instead of normal.</li>
<li>Annual equilibrium and transitional SPR are now calculated and reported.</li>
<li>Uneven length bin widths are now supported.</li>
<li>An example is added to the help documentation and online article, using Pacific cod (courtesy of R. Forrest).</li>
</ul>
</div>
<div id="assessment-models" class="section level3">
<h3 class="hasAnchor">
<a href="#assessment-models" class="anchor"></a>Assessment models</h3>
<ul>
<li>Priors on M, steepness, R0, and index q (lognormal, see RCM) can be created SCA, DD, and cDD assessment models.</li>
<li>Likelihood weights to SCA assessments can now be provided for <code>Catch</code>, <code>CAA</code>, and <code>CAL</code> in addition to <code>Index</code> in a named list <code>LWT</code>. Backwards compatibility remains to provide <code>LWT</code> as a vector for indices weights only.</li>
<li>A new SCA assessment model that incorporates density-dependent natural mortality (<code>SCA_DDM</code>) is added.</li>
<li>A new SCA assessment model that fits to length composition (<code>SCA_CAL</code>) is added.</li>
<li>Delay-difference assessments (DD_TMB, DD_SS, cDD, cDD_SS) can now fit to mean weight with argument <code>MW = TRUE</code>. The functions will look for mean weight data series in <code>Data@Misc[[x]]$MW</code>, otherwise will convert length composition <code>Data@CAL</code> to weights and calculate annual means.</li>
<li>Delay-difference assessments (DD_TMB and DD_SS) now use an instantaneous F formulation for the catch equation instead of Pope’s approximation. The models should now be more robust for high F situations.</li>
<li>Dynamic SSB0 is calculated for all assessment models.</li>
<li>A variant of the shortcut assessment emulator for closed-loop simulation is available (<code>Shortcut2</code>). This function fits an SCA assessment and then characterizes the assessment error relative to the operating model using a vector autoregressive (VAR) model. The functions samples the operating model with error predicted from the VAR model for the projection period. This is a useful function to guide the level of error in the shortcut method.</li>
</ul>
</div>
<div id="harvest-control-rules" class="section level3">
<h3 class="hasAnchor">
<a href="#harvest-control-rules" class="anchor"></a>Harvest control rules</h3>
<ul>
<li>Additional OCP types in <code>HCR_ramp</code> are available to create harvest control rules based on dynamic B0, and F-based rules (F/FMSY, F/F01, F/F-SPR).</li>
<li>Added a shortcut function for a fixed escapement harvest control rule (<code>HCR_escapement</code>).</li>
</ul>
</div>
</div>
    <div id="samtool-112" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-112" class="anchor"></a>SAMtool 1.1.2</h2>
<ul>
<li>Minor fix to vignette to fix MSEtool reverse dependency issue.</li>
</ul>
</div>
    <div id="samtool-111" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-111" class="anchor"></a>SAMtool 1.1.1</h2>
<ul>
<li>Fix year range for depletion calculation from time-varying SSB0 in RCM.</li>
</ul>
</div>
    <div id="samtool-110" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-110" class="anchor"></a>SAMtool 1.1.0</h2>
<ul>
<li>Edits to fix valgrind and sanitizer issues in TMB code.</li>
<li>Likelihood gradients, the derivatives of the likelihood of each annual data point with respect to model parameters, are plotted in the RCM markdown report. For this purpose, the annual age or length composition is considered to be a single piece of data. This diagnostic could be informative on how informative the data are to model parameters, with more influential data points having larger gradients.</li>
<li>When conditioned on effort, the <code>RCM</code> will now incorporate catches into the likelihood as a default. This allows the model to estimate F and R0 when conditioned on effort and there is patchy catch data.</li>
</ul>
</div>
    <div id="samtool-100" class="section level2">
<h2 class="hasAnchor">
<a href="#samtool-100" class="anchor"></a>SAMtool 1.0.0</h2>
<ul>
<li>Development of the assessment models and OM conditioning model in SAMtool 1.0.0 continues from MSEtool 2.0.1. <code>multiMSE</code> remains in MSEtool.</li>
<li>The age structure of the SCA models (<code>SCA</code>, <code>SCA_Pope</code>, <code>SSS</code>) start at age 0 following the change in the MSEtool OM.</li>
<li>An additional SCA model (<code>SCA_RWM</code>) can be used to estimate time-varying M (constant with age) as a random walk. Fix the random walk SD to a low value to effectively estimate a time-constant M (see help page).</li>
<li>Warnings during the fit of the assessment models (through <code>nlminb</code>) are turned off. Convergence status and issues can be checked in the <code>conv</code> slot of the output Assessment object. In closed-loop simulation, the <code>diagnostic</code> function can be used to track the behavior of model-based MPs. By default, pre-packaged model-based MPs and MPs made from the <code>make_MP</code> function are designed to report convergence info (stored in <code>MSE@PPD</code>).</li>
<li>Assessment functions now calculate and report spawning potential ratio and yield per recruit in the forecast slot of the S4 object. Also in this slot is a catch equation function calculates the TAC for a given F.</li>
<li>HCR nomenclature has changed. Operational control points (OCPs) are used instead of reference points (to help distinguish between reference points in the estimation model vs. the operating model. Various types of F can now be used in the HCR, including F0.1, Fmax, and FSPR, in addition to FMSY for the TAC calculation.</li>
<li>A <code>Shortcut</code> assess function samples the OM with error and autocorrelation for HCRs as an emulator of a stock assessment in closed-loop simulation. The <code>Perfect</code> function samples the OM without error.</li>
<li>All assessment models now accommodate multiple indices in model fitting, specify in the <code>AddInd</code> argument of functions which index slots in the Data object will be used among <a href="mailto:Data@Ind" class="email">Data@Ind</a>, <a href="mailto:Data@SpInd" class="email">Data@SpInd</a>, <a href="mailto:Data@VInd" class="email">Data@VInd</a>, and <a href="mailto:Data@AddInd" class="email">Data@AddInd</a>. Within series weighting is applied by using the corresponding CV slot, i.e., <a href="mailto:Data@CV_Ind" class="email">Data@CV_Ind</a> for <a href="mailto:Data@Ind" class="email">Data@Ind</a>, etc. Among series weighting can also be tuned using likelihood weights with <code>LWT</code> argument. For SCA and VPA models, the selectivity is fixed in the model using <a href="mailto:Data@AddIndV" class="email">Data@AddIndV</a> for indices in <a href="mailto:Data@AddInd" class="email">Data@AddInd</a>.</li>
</ul>
<div id="rcm-1" class="section level3">
<h3 class="hasAnchor">
<a href="#rcm-1" class="anchor"></a>RCM</h3>
<ul>
<li>The function for the OM conditioning model is now re-named to <code>RCM</code> (Rapid Conditioning Model).</li>
<li>The age structure of the model now starts at age 0, following the change in the MSEtool OM. The dimension associated with age in matrices and arrays need to be of length <code>maxage + 1</code> which corresponds to ages 0 to maxage.</li>
<li>When estimating fleet F in the model (<code>condition = "catch"</code>), the likelihood for the catch can now have a user-defined standard deviation indicated in <code>data$C_sd</code> (year and fleet specific, the previous default was 0.01 was built-in for all catches).</li>
<li>For generating length comps, variability in length-at-age can now be age-specific. Specify the length-at-age standard deviation in <code>OM@cpars$LatASD</code>.</li>
<li>Priors for log_R0 (normal distribution), steepness (beta distribution for Beverton-Holt, normal for Ricker), log_M (age and time constant, normal), and survey q (normal) can now be specified.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Quang Huynh, Tom Carruthers, Adrian Hordyk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


