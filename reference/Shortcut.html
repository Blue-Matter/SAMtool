<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Assessment emulator as a shortcut to model fitting in closed-loop simulation — Shortcut • SAMtool</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Assessment emulator as a shortcut to model fitting in closed-loop simulation — Shortcut" />
<meta property="og:description" content="Functions (class Assessment) that emulate a stock assessment by sampling the operating model biomass, abundance, and 
fishing mortality (with observation error, autocorrelation, and bias) instead of fitting a model. This output can then
be passed onto a harvest control rule (HCR function). Shortcut is the base function that samples the OM with an error 
distribution. Shortcut2, the more prefereable option, fits SCA in the last historical year of the operating 
model, estimates the error parameters using a vector autoregressive model of the residuals, and then generates model &quot;estimates&quot;
using predict.varest. Perfect assumes no error in the assessment model and is useful for comparing the behavior of 
different harvest control rules. To utilize the shortcut method in closed-loop simulation, use make_MP with these functions as 
the Assessment model. N.B. the functions do not work with runMSE(parallel = TRUE)." />
<meta property="og:image" content="https://SAMtool.openMSE.com/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SAMtool</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/SAMtool.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Blue-Matter/SAMtool/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assessment emulator as a shortcut to model fitting in closed-loop simulation</h1>
    <small class="dont-index">Source: <a href='https://github.com/Blue-Matter/SAMtool/blob/master/R/assess_shortcut.R'><code>R/assess_shortcut.R</code></a></small>
    <div class="hidden name"><code>Shortcut.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Functions (class Assessment) that emulate a stock assessment by sampling the operating model biomass, abundance, and 
fishing mortality (with observation error, autocorrelation, and bias) instead of fitting a model. This output can then
be passed onto a harvest control rule (HCR function). <code>Shortcut</code> is the base function that samples the OM with an error 
distribution. <code>Shortcut2</code>, the more prefereable option, fits <a href='SCA.html'>SCA</a> in the last historical year of the operating 
model, estimates the error parameters using a vector autoregressive model of the residuals, and then generates model "estimates"
using <a href='https://rdrr.io/pkg/vars/man/predict.html'>predict.varest</a>. <code>Perfect</code> assumes no error in the assessment model and is useful for comparing the behavior of 
different harvest control rules. To utilize the shortcut method in closed-loop simulation, use <a href='make_MP.html'>make_MP</a> with these functions as 
the Assessment model. N.B. the functions do not work with <code>runMSE(parallel = TRUE)</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>Shortcut</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='fl'>1</span>,
  <span class='va'>Data</span>,
  method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"B"</span>, <span class='st'>"N"</span>, <span class='st'>"RF"</span><span class='op'>)</span>,
  B_err <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.7</span>, <span class='fl'>1</span><span class='op'>)</span>,
  N_err <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.7</span>, <span class='fl'>1</span><span class='op'>)</span>,
  R_err <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.7</span>, <span class='fl'>1</span><span class='op'>)</span>,
  F_err <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.7</span>, <span class='fl'>1</span><span class='op'>)</span>,
  <span class='va'>VAR_model</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>Shortcut2</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>Data</span>,
  method <span class='op'>=</span> <span class='st'>"N"</span>,
  SCA_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  VAR_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>Perfect</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>Data</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An index for the objects in <code>Data</code> when running in <a href='https://rdrr.io/pkg/MSEtool/man/runMSE.html'>runMSE</a>.
Otherwise, equals to 1 When running an assessment interactively.</p></td>
    </tr>
    <tr>
      <th>Data</th>
      <td><p>An object of class Data.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Indicates where the error in the OM is located. For "B", OM biomass is directly sampled with error.
For "N", OM abundance-at-age is sampled and biomass subsequently calculated. For "RF", recruitment and F are
sampled to calculate abundance and biomass. There is no error in biological parameters for "N" and "RF". By default,
"B" is used for <code>Shortcut</code> and "N" for <code>Shortcut2</code>.</p></td>
    </tr>
    <tr>
      <th>B_err</th>
      <td><p>If <code>method = "B"</code>, a vector of length three that specifies the standard deviation (in logspace),
autocorrelation, and bias (1 = unbiased) for biomass.</p></td>
    </tr>
    <tr>
      <th>N_err</th>
      <td><p>Same as B_err, but for abundance when <code>method = "N"</code>.</p></td>
    </tr>
    <tr>
      <th>R_err</th>
      <td><p>Same as B_err, but for recruitment when <code>method = "RF"</code>.</p></td>
    </tr>
    <tr>
      <th>F_err</th>
      <td><p>Same as B_err. Always used regardless of <code>method</code> to report F and selectivity for HCR.</p></td>
    </tr>
    <tr>
      <th>VAR_model</th>
      <td><p>An object returned by <a href='https://rdrr.io/pkg/vars/man/VAR.html'>VAR</a> to generate emulated assessment error. Used by <code>Shortcut2</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments (not currently used).</p></td>
    </tr>
    <tr>
      <th>SCA_args</th>
      <td><p>Additional arguments to pass to <a href='SCA.html'>SCA</a>. Currently, arguments <code>SR</code> and <code>vulnerability</code>
are obtained from the operating model.</p></td>
    </tr>
    <tr>
      <th>VAR_args</th>
      <td><p>Additional arguments to pass to <a href='https://rdrr.io/pkg/vars/man/VAR.html'>VAR</a>. By default, argument <code>type = "none"</code> 
(stationary time series with mean zero is assumed).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <a href='Assessment-class.html'>Assessment</a>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently there is no error in FMSY (the target F in the HCR in SAMtool).</p>
<p>See Wiedenmann et al. (2015) for guidance on the magnitude of error for the shortcut emulator.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Wiedenmann, J., Wilberg, M.J., Sylvia, A., and Miller, T.J. 2015. Autocorrelated error in stock assessment 
estimates: Implications for management strategy evaluation. Fisheries Research 172: 325-334.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Q. Huynh</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>Shortcut_4010</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Shortcut</span>, <span class='va'>HCR40_10</span><span class='op'>)</span> 
<span class='va'>Shortcut_Nerr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Shortcut</span>, <span class='va'>HCR40_10</span>, method <span class='op'>=</span> <span class='st'>"N"</span>, N_err <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>0.1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Highly precise!</span>

<span class='co'># Fits SCA first and then emulate it in the projection period </span>
<span class='va'>Shortcut2_4010</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Shortcut2</span>, <span class='va'>HCR40_10</span><span class='op'>)</span> 

<span class='co'># \donttest{</span>
<span class='co'># Compare the shortcut method vs. fitting an SCA model with a 40-10 control rule</span>
<span class='va'>MSE</span> <span class='op'>&lt;-</span> <span class='fu'>runMSE</span><span class='op'>(</span><span class='va'>testOM</span>, MPs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Shortcut_4010"</span>, <span class='st'>"SCA_4010"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'><span style='color: #0000BB;'>Checking MPs </span>
#&gt; <span class='message'></span></span></div><div class='output co'>#&gt; <span class='error'>Error: Some MPs are not a functions of class `MP`: Shortcut_4010</span></div><div class='input'><span class='co'># }</span>

<span class='co'># Compare the performance of three HCRs</span>
<span class='va'>Perfect_4010</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Perfect</span>, <span class='va'>HCR40_10</span><span class='op'>)</span>
<span class='va'>Perfect_6020</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Perfect</span>, <span class='va'>HCR60_20</span><span class='op'>)</span>
<span class='va'>Perfect_8040MSY</span> <span class='op'>&lt;-</span> <span class='fu'><a href='make_MP.html'>make_MP</a></span><span class='op'>(</span><span class='va'>Perfect</span>, <span class='va'>HCR_ramp</span>, OCP_type <span class='op'>=</span> <span class='st'>"SSB_SSBMSY"</span>, TOCP <span class='op'>=</span> <span class='fl'>0.8</span>, LOCP <span class='op'>=</span> <span class='fl'>0.4</span><span class='op'>)</span>

<span class='co'># \donttest{</span>
<span class='va'>MSE</span> <span class='op'>&lt;-</span> <span class='fu'>runMSE</span><span class='op'>(</span><span class='va'>testOM</span>, MPs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Perfect_4010"</span>, <span class='st'>"Perfect_6020"</span>, <span class='st'>"Perfect_8040MSY"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'><span style='color: #0000BB;'>Checking MPs </span>
#&gt; <span class='message'></span></span></div><div class='output co'>#&gt; <span class='error'>Error: Some MPs are not a functions of class `MP`: Perfect_4010, Perfect_6020, Perfect_8040MSY</span></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Quang Huynh, Tom Carruthers, Adrian Hordyk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


